Close Reader View

  * Text and layout
  *


        Text

    Text size

    Font

    Font weight

    ------------------------------------------------------------------------


        Layout

    ------------------------------------------------------------------------


        Advanced

    Text alignment

    Reset defaults

  * Theme
  *


        Theme

    Default

    Custom

    Auto

    Light

    Dark

    Sepia

    Contrast

    Gray

      o
      o
      o
      o
  o
    Reset defaults

  * Read aloud (N)
  *


        Read aloud

    ------------------------------------------------------------------------


        Voice

    Default

    DefaultAlbert (English)Bad News (English)Bahh (English)Bells
    (English)Boing (English)Bubbles (English)Cellos (English)Daniel
    (English)Eddy (English (UK)) (English)Eddy (English (US))
    (English)Flo (English (UK)) (English)Flo (English (US))
    (English)Fred (English)Good News (English)Grandma (English (UK))
    (English)Grandma (English (US)) (English)Grandpa (English (UK))
    (English)Grandpa (English (US)) (English)Jester (English)Junior
    (English)Karen (English)Kathy (English)Moira (English)Organ
    (English)Ralph (English)Reed (English (UK)) (English)Reed (English
    (US)) (English)Rishi (English)Rocko (English (UK)) (English)Rocko
    (English (US)) (English)Samantha (English)Sandy (English (UK))
    (English)Sandy (English (US)) (English)Shelley (English (UK))
    (English)Shelley (English (US)) (English)Superstar (English)Tessa
    (English)Trinoids (English)Whisper (English)Wobble (English)Zarvox
    (English)

Save to Pocket
supabase.com <https://supabase.com/docs/reference/javascript/introduction>


  JavaScript API Reference | Supabase Docs

13â€“17 minutes
------------------------------------------------------------------------
------------------------------------------------------------------------
------------------------------------------------------------------------

|

1

2

3

4

import {  } from '@supabase/supabase-js'// Create a single supabase client for interacting with your databaseconst  = ('https://xyzcompany.supabase.co', 'public-anon-key')

|

------------------------------------------------------------------------
------------------------------------------------------------------------

|

1

2

3

const { data, error } = await supabase  .from('characters')  .select()

|

------------------------------------------------------------------------

|

1

2

3

const { error } = await supabase  .from('countries')  .insert({ id: 1, name: 'Mordor' })

|

------------------------------------------------------------------------

|

1

2

3

4

const { error } = await supabase  .from('instruments')  .update({ name: 'piano' })  .eq('id', 1)

|

------------------------------------------------------------------------

|

1

2

3

4

const { data, error } = await supabase  .from('instruments')  .upsert({ id: 1, name: 'piano' })  .select()

|

------------------------------------------------------------------------

|

1

2

3

4

const response = await supabase  .from('countries')  .delete()  .eq('id', 1)

|

------------------------------------------------------------------------

|

1

const { data, error } = await supabase.rpc('hello_world')

|

------------------------------------------------------------------------

|

1

2

3

4

5

6

7

8

9

const { data, error } = await supabase  .from('instruments')  .select('name, section_id')  .eq('name', 'violin')    // Correctconst { data, error } = await supabase  .from('instruments')  .eq('name', 'violin')    // Incorrect  .select('name, section_id')

|

------------------------------------------------------------------------

|

1

2

3

4

const { data, error } = await supabase  .from('characters')  .select()  .eq('name', 'Leia')

|

------------------------------------------------------------------------

|

1

2

3

4

const { data, error } = await supabase  .from('characters')  .select()  .neq('name', 'Leia')

|

------------------------------------------------------------------------

|

1

2

3

4

const { data, error } = await supabase  .from('characters')  .select()  .gt('id', 2)

|

------------------------------------------------------------------------

|

1

2

3

4

const { data, error } = await supabase  .from('characters')  .select()  .gte('id', 2)

|

------------------------------------------------------------------------

|

1

2

3

4

const { data, error } = await supabase  .from('characters')  .select()  .lt('id', 2)

|

------------------------------------------------------------------------

|

1

2

3

4

const { data, error } = await supabase  .from('characters')  .select()  .lte('id', 2)

|

------------------------------------------------------------------------

|

1

2

3

4

const { data, error } = await supabase  .from('characters')  .select()  .like('name', '%Lu%')

|

------------------------------------------------------------------------

|

1

2

3

4

const { data, error } = await supabase  .from('characters')  .select()  .ilike('name', '%lu%')

|

------------------------------------------------------------------------

|

1

2

3

4

const { data, error } = await supabase  .from('countries')  .select()  .is('name', null)

|

------------------------------------------------------------------------

|

1

2

3

4

const { data, error } = await supabase  .from('characters')  .select()  .in('name', ['Leia', 'Han'])

|

------------------------------------------------------------------------

|

1

2

3

4

const { data, error } = await supabase  .from('issues')  .select()  .contains('tags', ['is:open', 'priority:low'])

|

------------------------------------------------------------------------

|

1

2

3

4

const { data, error } = await supabase  .from('classes')  .select('name')  .containedBy('days', ['monday', 'tuesday', 'wednesday', 'friday'])

|

------------------------------------------------------------------------

|

1

2

3

4

const { data, error } = await supabase  .from('reservations')  .select()  .rangeGt('during', '[2000-01-02 08:00, 2000-01-02 09:00)')

|

------------------------------------------------------------------------

|

1

2

3

4

const { data, error } = await supabase  .from('reservations')  .select()  .rangeGte('during', '[2000-01-02 08:30, 2000-01-02 09:30)')

|

------------------------------------------------------------------------

|

1

2

3

4

const { data, error } = await supabase  .from('reservations')  .select()  .rangeLt('during', '[2000-01-01 15:00, 2000-01-01 16:00)')

|

------------------------------------------------------------------------

|

1

2

3

4

const { data, error } = await supabase  .from('reservations')  .select()  .rangeLte('during', '[2000-01-01 14:00, 2000-01-01 16:00)')

|

------------------------------------------------------------------------

|

1

2

3

4

const { data, error } = await supabase  .from('reservations')  .select()  .rangeAdjacent('during', '[2000-01-01 12:00, 2000-01-01 13:00)')

|

------------------------------------------------------------------------

|

1

2

3

4

const { data, error } = await supabase  .from('issues')  .select('title')  .overlaps('tags', ['is:closed', 'severity:high'])

|

------------------------------------------------------------------------

|

1

2

3

4

5

6

const result = await supabase  .from("texts")  .select("content")  .textSearch("content", `'eggs' & 'ham'`, {    config: "english",  });

|

------------------------------------------------------------------------

|

1

2

3

4

const { data, error } = await supabase  .from('characters')  .select('name')  .match({ id: 2, name: 'Leia' })

|

------------------------------------------------------------------------

|

1

2

3

4

const { data, error } = await supabase  .from('countries')  .select()  .not('name', 'is', null)

|

------------------------------------------------------------------------

|

1

2

3

4

const { data, error } = await supabase  .from('characters')  .select('name')  .or('id.eq.2,name.eq.Han')

|

------------------------------------------------------------------------

|

1

2

3

4

const { data, error } = await supabase  .from('characters')  .select()  .filter('name', 'in', '("Han","Yoda")')

|

------------------------------------------------------------------------
------------------------------------------------------------------------

|

1

2

3

4

const { data, error } = await supabase  .from('characters')  .upsert({ id: 1, name: 'Han Solo' })  .select()

|

------------------------------------------------------------------------

|

1

2

3

4

const { data, error } = await supabase  .from('characters')  .select('id, name')  .order('id', { ascending: false })

|

------------------------------------------------------------------------

|

1

2

3

4

const { data, error } = await supabase  .from('characters')  .select('name')  .limit(1)

|

------------------------------------------------------------------------

|

1

2

3

4

const { data, error } = await supabase  .from('countries')  .select('name')  .range(0, 1)

|

------------------------------------------------------------------------

|

1

2

3

4

5

6

const ac = new AbortController()ac.abort()const { data, error } = await supabase  .from('very_big_table')  .select()  .abortSignal(ac.signal)

|

------------------------------------------------------------------------

|

1

2

3

4

5

const { data, error } = await supabase  .from('characters')  .select('name')  .limit(1)  .single()

|

------------------------------------------------------------------------

|

1

2

3

4

5

const { data, error } = await supabase  .from('characters')  .select()  .eq('name', 'Katniss')  .maybeSingle()

|

------------------------------------------------------------------------

|

1

2

3

4

const { data, error } = await supabase  .from('characters')  .select()  .csv()

|

------------------------------------------------------------------------

|

1

2

3

4

const { data } = await supabase  .from('countries')  .select()  .returns<Array<MyType>>()

|

------------------------------------------------------------------------

|

1

2

3

4

const { data } = await supabase  .from('countries')  .select()  .overrideTypes<Array<MyType>, { merge: false }>()

|

------------------------------------------------------------------------

|

1

2

3

4

const { data, error } = await supabase  .from('characters')  .select()  .explain()

|

------------------------------------------------------------------------

|

1

2

3

import { createClient } from '@supabase/supabase-js'const supabase = createClient(supabase_url, anon_key)

|

------------------------------------------------------------------------

|

1

2

3

4

const { data, error } = await supabase.auth.signUp({  email: 'example@email.com',  password: 'example-password',})

|

------------------------------------------------------------------------

|

1

2

3

4

5

6

7

8

9

10

11

12

13

14

15

16

17

18

19

20

const { data } = supabase.auth.onAuthStateChange((event, session) => {  console.log(event, session)  if (event === 'INITIAL_SESSION') {    // handle initial session  } else if (event === 'SIGNED_IN') {    // handle sign in event  } else if (event === 'SIGNED_OUT') {    // handle sign out event  } else if (event === 'PASSWORD_RECOVERY') {    // handle password recovery event  } else if (event === 'TOKEN_REFRESHED') {    // handle token refreshed event  } else if (event === 'USER_UPDATED') {    // handle user updated event  }})// call unsubscribe to remove the callbackdata.subscription.unsubscribe()

|

------------------------------------------------------------------------

|

1

2

3

4

5

const { data, error } = await supabase.auth.signInAnonymously({  options: {    captchaToken  }});

|

------------------------------------------------------------------------

|

1

2

3

4

const { data, error } = await supabase.auth.signInWithPassword({  email: 'example@email.com',  password: 'example-password',})

|

------------------------------------------------------------------------

|

1

2

3

4

const { data, error } = await supabase.auth.signInWithIdToken({  provider: 'google',  token: 'your-id-token'})

|

------------------------------------------------------------------------

|

1

2

3

4

5

6

const { data, error } = await supabase.auth.signInWithOtp({  email: 'example@email.com',  options: {    emailRedirectTo: 'https://example.com/welcome'  }})

|

------------------------------------------------------------------------

|

1

2

3

const { data, error } = await supabase.auth.signInWithOAuth({  provider: 'github'})

|

------------------------------------------------------------------------

|

1

2

3

4

5

6

7

8

9

10

11

// You can extract the user's email domain and use it to trigger the  // authentication flow with the correct identity provider.  const { data, error } = await supabase.auth.signInWithSSO({    domain: 'company.com'  })  if (data?.url) {    // redirect the user to the identity provider's authentication flow    window.location.href = data.url  }

|

------------------------------------------------------------------------

|

1

const { error } = await supabase.auth.signOut()

|

------------------------------------------------------------------------

|

1

2

3

const { data, error } = await supabase.auth.resetPasswordForEmail(email, {  redirectTo: 'https://example.com/update-password',})

|

------------------------------------------------------------------------

|

1

const { data, error } = await supabase.auth.verifyOtp({ email, token, type: 'email'})

|

------------------------------------------------------------------------

|

1

const { data, error } = await supabase.auth.getSession()

|

------------------------------------------------------------------------

|

1

2

const { data, error } = await supabase.auth.refreshSession()const { session, user } = data

|

------------------------------------------------------------------------

|

1

const { data: { user } } = await supabase.auth.getUser()

|

------------------------------------------------------------------------

|

1

2

3

const { data, error } = await supabase.auth.updateUser({  email: 'new@email.com'})

|

------------------------------------------------------------------------

|

1

const { data, error } = await supabase.auth.getUserIdentities()

|

------------------------------------------------------------------------

|

1

2

3

const { data, error } = await supabase.auth.linkIdentity({  provider: 'github'})

|

------------------------------------------------------------------------

|

1

2

3

4

5

6

7

8

9

10

// retrieve all identites linked to a userconst identities = await supabase.auth.getUserIdentities()// find the google identityconst googleIdentity = identities.find(  identity => identity.provider === 'google')// unlink the google identityconst { error } = await supabase.auth.unlinkIdentity(googleIdentity)

|

------------------------------------------------------------------------

|

1

const { error } = await supabase.auth.reauthenticate()

|

------------------------------------------------------------------------

|

1

2

3

4

5

6

7

const { error } = await supabase.auth.resend({  type: 'signup',  email: 'email@example.com',  options: {    emailRedirectTo: 'https://example.com/welcome'  }})

|

------------------------------------------------------------------------

|

1

2

3

4

const { data, error } = await supabase.auth.setSession({    access_token,    refresh_token  })

|

------------------------------------------------------------------------

|

1

supabase.auth.exchangeCodeForSession('34e770dd-9ff9-416c-87fa-43b31d7ef225')

|

------------------------------------------------------------------------

|

1

2

3

4

5

6

7

8

9

10

import { AppState } from 'react-native'// make sure you register this only once!AppState.addEventListener('change', (state) => {  if (state === 'active') {    supabase.auth.startAutoRefresh()  } else {    supabase.auth.stopAutoRefresh()  }})

|

------------------------------------------------------------------------

|

1

2

3

4

5

6

7

8

9

10

import { AppState } from 'react-native'// make sure you register this only once!AppState.addEventListener('change', (state) => {  if (state === 'active') {    supabase.auth.startAutoRefresh()  } else {    supabase.auth.stopAutoRefresh()  }})

|

------------------------------------------------------------------------
------------------------------------------------------------------------

|

1

2

3

4

5

6

7

8

9

10

const { data, error } = await supabase.auth.mfa.enroll({  factorType: 'totp',  friendlyName: 'your_friendly_name'})// Use the id to create a challenge.// The challenge can be verified by entering the code generated from the authenticator app.// The code will be generated upon scanning the qr_code or entering the secret into the authenticator app.const { id, type, totp: { qr_code, secret, uri }, friendly_name } = dataconst challenge = await supabase.auth.mfa.challenge({ factorId: id });

|

------------------------------------------------------------------------

|

1

2

3

const { data, error } = await supabase.auth.mfa.challenge({  factorId: '34e770dd-9ff9-416c-87fa-43b31d7ef225'})

|

------------------------------------------------------------------------

|

1

2

3

4

5

const { data, error } = await supabase.auth.mfa.verify({  factorId: '34e770dd-9ff9-416c-87fa-43b31d7ef225',  challengeId: '4034ae6f-a8ce-4fb5-8ee5-69a5863a7c15',  code: '123456'})

|

------------------------------------------------------------------------

|

1

2

3

4

const { data, error } = await supabase.auth.mfa.challengeAndVerify({  factorId: '34e770dd-9ff9-416c-87fa-43b31d7ef225',  code: '123456'})

|

------------------------------------------------------------------------

|

1

2

3

const { data, error } = await supabase.auth.mfa.unenroll({  factorId: '34e770dd-9ff9-416c-87fa-43b31d7ef225',})

|

------------------------------------------------------------------------

|

1

2

const { data, error } = await supabase.auth.mfa.getAuthenticatorAssuranceLevel()const { currentLevel, nextLevel, currentAuthenticationMethods } = data

|

------------------------------------------------------------------------

|

1

2

3

4

5

6

7

8

9

10

11

import { createClient } from '@supabase/supabase-js'const supabase = createClient(supabase_url, service_role_key, {  auth: {    autoRefreshToken: false,    persistSession: false  }})// Access auth admin apiconst adminAuthClient = supabase.auth.admin

|

------------------------------------------------------------------------

|

1

const { data, error } = await supabase.auth.admin.getUserById(1)

|

------------------------------------------------------------------------

|

1

const { data: { users }, error } = await supabase.auth.admin.listUsers()

|

------------------------------------------------------------------------

|

1

2

3

4

5

const { data, error } = await supabase.auth.admin.createUser({  email: 'user@email.com',  password: 'password',  user_metadata: { name: 'Yoda' }})

|

------------------------------------------------------------------------

|

1

2

3

const { data, error } = await supabase.auth.admin.deleteUser(  '715ed5db-f090-4b8c-a067-640ecee36aa0')

|

------------------------------------------------------------------------

|

1

const { data, error } = await supabase.auth.admin.inviteUserByEmail('email@example.com')

|

------------------------------------------------------------------------

|

1

2

3

4

5

const { data, error } = await supabase.auth.admin.generateLink({  type: 'signup',  email: 'email@example.com',  password: 'secret'})

|

------------------------------------------------------------------------

|

1

2

3

4

const { data: user, error } = await supabase.auth.admin.updateUserById(  '11111111-1111-1111-1111-111111111111',  { email: 'new@email.com' })

|

------------------------------------------------------------------------

|

1

2

3

4

const { data, error } = await supabase.auth.admin.mfa.deleteFactor({  id: '34e770dd-9ff9-416c-87fa-43b31d7ef225',  userId: 'a89baba7-b1b7-440f-b4bb-91026967f66b',})

|

------------------------------------------------------------------------

|

1

2

3

const { data, error } = await supabase.functions.invoke('hello', {  body: { foo: 'bar' }})

|

------------------------------------------------------------------------

|

1

2

3

4

5

6

7

8

9

10

11

12

13

const channel = supabase.channel("room1")channel.on("broadcast", { event: "cursor-pos" }, (payload) => {  console.log("Cursor position received!", payload);}).subscribe((status) => {  if (status === "SUBSCRIBED") {    channel.send({      type: "broadcast",      event: "cursor-pos",      payload: { x: Math.random(), y: Math.random() },    });  }});

|

------------------------------------------------------------------------

|

1

supabase.removeChannel(myChannel)

|

------------------------------------------------------------------------

|

1

supabase.removeAllChannels()

|

------------------------------------------------------------------------

|

1

const channels = supabase.getChannels()

|

------------------------------------------------------------------------

|

1

2

3

4

5

6

7

8

9

10

11

supabase  .channel('room1')  .subscribe((status) => {    if (status === 'SUBSCRIBED') {      channel.send({        type: 'broadcast',        event: 'cursor-pos',        payload: { x: Math.random(), y: Math.random() },      })    }  })

|

------------------------------------------------------------------------

|

1

2

3

4

5

6

7

const { data, error } = await supabase  .storage  .createBucket('avatars', {    public: false,    allowedMimeTypes: ['image/png'],    fileSizeLimit: 1024  })

|

------------------------------------------------------------------------

|

1

2

3

const { data, error } = await supabase  .storage  .getBucket('avatars')

|

------------------------------------------------------------------------

|

1

2

3

const { data, error } = await supabase  .storage  .listBuckets()

|

------------------------------------------------------------------------

|

1

2

3

4

5

6

7

const { data, error } = await supabase  .storage  .updateBucket('avatars', {    public: false,    allowedMimeTypes: ['image/png'],    fileSizeLimit: 1024  })

|

------------------------------------------------------------------------

|

1

2

3

const { data, error } = await supabase  .storage  .deleteBucket('avatars')

|

------------------------------------------------------------------------

|

1

2

3

const { data, error } = await supabase  .storage  .emptyBucket('avatars')

|

------------------------------------------------------------------------

|

1

2

3

4

5

6

7

8

const avatarFile = event.target.files[0]const { data, error } = await supabase  .storage  .from('avatars')  .upload('public/avatar1.png', avatarFile, {    cacheControl: '3600',    upsert: false  })

|

------------------------------------------------------------------------

|

1

2

3

4

const { data, error } = await supabase  .storage  .from('avatars')  .download('folder/avatar1.png')

|

------------------------------------------------------------------------

|

1

2

3

4

5

6

7

8

const { data, error } = await supabase  .storage  .from('avatars')  .list('folder', {    limit: 100,    offset: 0,    sortBy: { column: 'name', order: 'asc' },  })

|

------------------------------------------------------------------------

|

1

2

3

4

5

6

7

8

const avatarFile = event.target.files[0]const { data, error } = await supabase  .storage  .from('avatars')  .update('public/avatar1.png', avatarFile, {    cacheControl: '3600',    upsert: true  })

|

------------------------------------------------------------------------

|

1

2

3

4

const { data, error } = await supabase  .storage  .from('avatars')  .move('public/avatar1.png', 'private/avatar2.png')

|

------------------------------------------------------------------------

|

1

2

3

4

const { data, error } = await supabase  .storage  .from('avatars')  .copy('public/avatar1.png', 'private/avatar2.png')

|

------------------------------------------------------------------------

|

1

2

3

4

const { data, error } = await supabase  .storage  .from('avatars')  .remove(['folder/avatar1.png'])

|

------------------------------------------------------------------------

|

1

2

3

4

const { data, error } = await supabase  .storage  .from('avatars')  .createSignedUrl('folder/avatar1.png', 60)

|

------------------------------------------------------------------------

|

1

2

3

4

const { data, error } = await supabase  .storage  .from('avatars')  .createSignedUrls(['folder/avatar1.png', 'folder/avatar2.png'], 60)

|

------------------------------------------------------------------------

|

1

2

3

4

const { data, error } = await supabase  .storage  .from('avatars')  .createSignedUploadUrl('folder/cat.jpg')

|

------------------------------------------------------------------------

|

1

2

3

4

const { data, error } = await supabase  .storage  .from('avatars')  .uploadToSignedUrl('folder/cat.jpg', 'token-from-createSignedUploadUrl', file)

|

------------------------------------------------------------------------

|

1

2

3

4

const { data } = supabase  .storage  .from('public-bucket')  .getPublicUrl('folder/avatar1.png')

|

------------------------------------------------------------------------
